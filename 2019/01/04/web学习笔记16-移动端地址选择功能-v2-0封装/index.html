<!DOCTYPE html>
<html>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="&amp;#160;&amp;#160;&amp;#160;&amp;#160;按照之前的约定，把之前地址选择控件进行了封装，做成了一个直接可以调用的版本，不用太多繁琐的东西，直接使用。 &amp;#160;&amp;#160;&amp;#160;&amp;#160;效果如图(跟之前一样)： &amp;#160;&amp;#160;&amp;#160;&amp;#160;这次把jquery拿掉，全部都是用js原生写的，不过动态效果还没有加进去，不过凑合能用了，弹出效果暂时还没做，主要功能性的">
<meta property="og:type" content="article">
<meta property="og:title" content="web学习笔记16-移动端地址选择功能@v2.0封装">
<meta property="og:url" content="http://yoursite.com/2019/01/04/web学习笔记16-移动端地址选择功能-v2-0封装/index.html">
<meta property="og:site_name" content="点柈">
<meta property="og:description" content="&amp;#160;&amp;#160;&amp;#160;&amp;#160;按照之前的约定，把之前地址选择控件进行了封装，做成了一个直接可以调用的版本，不用太多繁琐的东西，直接使用。 &amp;#160;&amp;#160;&amp;#160;&amp;#160;效果如图(跟之前一样)： &amp;#160;&amp;#160;&amp;#160;&amp;#160;这次把jquery拿掉，全部都是用js原生写的，不过动态效果还没有加进去，不过凑合能用了，弹出效果暂时还没做，主要功能性的">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/1062695-22b3275276e5155d.gif?imageMogr2/auto-orient/strip">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/1062695-d13911affbc3a3b9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/1062695-e590f9ac4fda84c3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:updated_time" content="2019-01-04T09:32:37.897Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="web学习笔记16-移动端地址选择功能@v2.0封装">
<meta name="twitter:description" content="&amp;#160;&amp;#160;&amp;#160;&amp;#160;按照之前的约定，把之前地址选择控件进行了封装，做成了一个直接可以调用的版本，不用太多繁琐的东西，直接使用。 &amp;#160;&amp;#160;&amp;#160;&amp;#160;效果如图(跟之前一样)： &amp;#160;&amp;#160;&amp;#160;&amp;#160;这次把jquery拿掉，全部都是用js原生写的，不过动态效果还没有加进去，不过凑合能用了，弹出效果暂时还没做，主要功能性的">
<meta name="twitter:image" content="https://upload-images.jianshu.io/upload_images/1062695-22b3275276e5155d.gif?imageMogr2/auto-orient/strip">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>web学习笔记16-移动端地址选择功能@v2.0封装</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
      <link rel="alternate" href="/atom.xml" title="点柈" type="application/atom+xml" />
    
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="https://github.com/Yulingsong">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" href="/2018/12/24/web学习笔记15-移动端地址选择控件-v1-0简单版/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2019/01/04/web学习笔记16-移动端地址选择功能-v2-0封装/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2019/01/04/web学习笔记16-移动端地址选择功能-v2-0封装/&text=web学习笔记16-移动端地址选择功能@v2.0封装"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2019/01/04/web学习笔记16-移动端地址选择功能-v2-0封装/&title=web学习笔记16-移动端地址选择功能@v2.0封装"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2019/01/04/web学习笔记16-移动端地址选择功能-v2-0封装/&is_video=false&description=web学习笔记16-移动端地址选择功能@v2.0封装"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=web学习笔记16-移动端地址选择功能@v2.0封装&body=Check out this article: http://yoursite.com/2019/01/04/web学习笔记16-移动端地址选择功能-v2-0封装/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2019/01/04/web学习笔记16-移动端地址选择功能-v2-0封装/&title=web学习笔记16-移动端地址选择功能@v2.0封装"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2019/01/04/web学习笔记16-移动端地址选择功能-v2-0封装/&title=web学习笔记16-移动端地址选择功能@v2.0封装"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2019/01/04/web学习笔记16-移动端地址选择功能-v2-0封装/&title=web学习笔记16-移动端地址选择功能@v2.0封装"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2019/01/04/web学习笔记16-移动端地址选择功能-v2-0封装/&title=web学习笔记16-移动端地址选择功能@v2.0封装"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2019/01/04/web学习笔记16-移动端地址选择功能-v2-0封装/&name=web学习笔记16-移动端地址选择功能@v2.0封装&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#第一步-创建基本文件，确定思路"><span class="toc-number">1.</span> <span class="toc-text">第一步:创建基本文件，确定思路</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第二步-构建基本页面，编写css"><span class="toc-number">2.</span> <span class="toc-text">第二步:构建基本页面，编写css</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第三步-了解调用方法数据结构"><span class="toc-number">3.</span> <span class="toc-text">第三步:了解调用方法数据结构</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第四步-编辑逻辑部分"><span class="toc-number">4.</span> <span class="toc-text">第四步:编辑逻辑部分</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-声明对象，声明方法"><span class="toc-number">4.0.0.1.</span> <span class="toc-text">1:声明对象，声明方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-处理传递过来的数据，创建不同的变量赋值"><span class="toc-number">4.0.0.2.</span> <span class="toc-text">2:处理传递过来的数据，创建不同的变量赋值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-初始化弹框html，添加到页面上"><span class="toc-number">4.0.0.3.</span> <span class="toc-text">3:初始化弹框html，添加到页面上</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-绑定关闭弹框事件，移除相应元素"><span class="toc-number">4.0.0.4.</span> <span class="toc-text">4:绑定关闭弹框事件，移除相应元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-获取地址数据"><span class="toc-number">4.0.0.5.</span> <span class="toc-text">5:获取地址数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-设置显示html，渲染页面，绑定相应的点击事件"><span class="toc-number">4.0.0.6.</span> <span class="toc-text">6:设置显示html，渲染页面，绑定相应的点击事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-实现点击地址列表中地址的方法"><span class="toc-number">4.0.0.7.</span> <span class="toc-text">7:实现点击地址列表中地址的方法</span></a></li></ol></li></ol></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        web学习笔记16-移动端地址选择功能@v2.0封装
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">点柈</span>
      </span>
      
    <div class="postdate">
        <time datetime="2019-01-04T09:32:08.000Z" itemprop="datePublished">2019-01-04</time>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>&#160;&#160;&#160;&#160;按照之前的约定，把之前地址选择控件进行了封装，做成了一个直接可以调用的版本，不用太多繁琐的东西，直接使用。</p>
<p>&#160;&#160;&#160;&#160;效果如图(跟之前一样)：<br><img src="https://upload-images.jianshu.io/upload_images/1062695-22b3275276e5155d.gif?imageMogr2/auto-orient/strip" alt="效果图"></p>
<p>&#160;&#160;&#160;&#160;这次把jquery拿掉，全部都是用js原生写的，不过动态效果还没有加进去，不过凑合能用了，弹出效果暂时还没做，主要功能性的东西做出来了，后期有时间会做一下，不过到时候就不更新文章了。</p>
<p>&#160;&#160;&#160;&#160;没有其他兴趣的就直接看代码。<a href="https://github.com/Yulingsong/selectAddress-v2.0" target="_blank" rel="noopener">github selectAddress-v2.0</a></p>
<p>接下去进去正题。这次封装多多少少也花了点时间，平时干活完整的封装一个插件次数还是不算多，这次正好借着这个机会，慢慢一步步的摸索出来封装成插件的一种方式。</p>
<h1 id="第一步-创建基本文件，确定思路"><a href="#第一步-创建基本文件，确定思路" class="headerlink" title="第一步:创建基本文件，确定思路"></a>第一步:创建基本文件，确定思路</h1><p>&#160;&#160;&#160;&#160;创建项目之后，创建三个文件，分别是html，css，js文件。<br><img src="https://upload-images.jianshu.io/upload_images/1062695-d13911affbc3a3b9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png"></p>
<p>&#160;&#160;&#160;&#160;这次封装的思路呢，是将js部分的声明一个对象，在对象中声明一个启动方法，把所有的逻辑部分内容放进这个启动方法里面。在调用方法弹出选择框的时候，将基本的接口数据，地址信息都传递过去，然后进行一些处理。</p>
<h1 id="第二步-构建基本页面，编写css"><a href="#第二步-构建基本页面，编写css" class="headerlink" title="第二步:构建基本页面，编写css"></a>第二步:构建基本页面，编写css</h1><p>&#160;&#160;&#160;&#160;那么首先构建基本的页面和样式。按照之前版本样式不变，只不过html部分只有基本的按钮就行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;chooseAddress&lt;/title&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1,user-scalable=0,minimum-scale=1, maximum-scale=1&quot;/&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;address.css&quot;&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div class=&quot;but&quot; onclick=&quot;show()&quot;&gt;点击选择地址&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot;product_details_address&quot; onclick=&quot;show()&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;choose_address jdshop_alignment_center&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;details_address&quot;&gt;</span><br><span class="line">            &lt;div&gt;&lt;span&gt;送至&lt;/span&gt;</span><br><span class="line">                &lt;img src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAMAAAApB0NrAAABj1BMVEUAAAD////mABKcAQ3mABLDABDFABDmABK+AQ++ARDmABLCABDmABLNABDCABDmABK+AQ/mABK8AQ++AQ/mABLMABC/ARDmABK8AQ/mABLiABK+AQ/mABK7AQ+6AQ/mABLmABK6AQ/mABK9AQ/mABK6AQ/XABHmABK6AQ++Dxy+EB2/FCHAFiPAFyTBABDCHyvDChnDIy/EJTHJOUTJOkXKPUfLP0nNRlDPTlfQVF3RV2DTX2fWABHXa3PZcnnad37cJDPcf4beho3fh47gi5LgjpXhj5bjABLkWGPlDyDlnqTmABLmARPmAhTmoafnparnpqvoEyToFiboGCjpGyvprLHprrPqJDPqKDfqKzrrMD/rMUDsUV3tRlPtR1TtvsLugYnuwsbvXWjvxMfwZnHwtLnxbnjxzM/xzdDyeoPy0NP0i5P0jpb0kpr1m6L3sbf3tLn34eP4vMH55+j56uv70tX78PH86uv87/D95uj96uv99/f9+fn+8vP+8/T++/v+/Pz+/f3/+/v//v7////fwfveAAAAKHRSTlMAAAIDCw0NDhERFRlCSEtdaXiFhYiQlKi0wMHJytLT5Obp6erq7vz8QGVO8AAAAbRJREFUOMuF1OVfAjEYB3BAFEUUURSxAIvZ3d0xsbvF7u6W+8Pdc8/dbQcov1e77ftZ3TaDMXYMRoMWk83p9vqp3+t22ky8WjAWh4fyeByWSGMvpPoU28OM2UUj4zKLxpqnVAdWNjeWJ1SUZ+XGrJC58xeJ5fl0RkVmzSgDBT8kJU/r6nCqseP3nsTzPaogOxoLrmj1RzDSa6+yOotsHPh1gx0cnYTkwkInVjvAmHDrluSWnRpC6g+hFKpC5DExY0N/AA23ZYSl8gHKHQSRjRknmjOoHyJyxqHcRxA5mXGjuYD6HjT9UB4kiNzMeNEcQ/0imi0odxFEXmb8aNbkibZAQ5s8/TqCyM+M+nPuoeFtoKl5+EteIXbJEO+HBiVdWhVDSvl8aOBeJLsqIUV8XZRuiqZBM7l8f1guOZnUCMni+8wy/66SuwpuUvn/0p2Odk58ccJ/Z5m4QjLFCckQzw9k9hHIdTknJYm6cwjZYIfns1HoJi3sPEO2JalbINkR9wJ2cn9aIPkJUe4XpWO1nBQk/3FPR6q1geLD73txGCpJ++/dAORLT4rytgjvT05miv79iZ1ftLMHLKmtwx4AAAAASUVORK5CYII=&quot;&gt;</span><br><span class="line">                &lt;span id=&quot;product_address_show&quot; style=&quot;max-width: 250px&quot;&gt;北京市,北京市,朝阳区,建外街道&lt;/span&gt;&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;details_stock&quot;&gt;</span><br><span class="line">            &lt;img src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAMAAACfWMssAAABMlBMVEX///+KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiopnwFdMAAAAZXRSTlMAAQIDBAYHCgsMDg8UFRYYGhweJCYpLS4wMzc9QUJHSElLTlBUWltgZmhpcHF1d3t9gIGEhoiJi42TlpeZn6Gkpqesra6ytLm+v8THycvP0NLT1Nrc3+Pk5+jr7fDx8vP19vr9/vBx0x4AAAENSURBVBgZ7cFVVkIBFAXQ80RERVCxsbC7uxPEQrFb4XnmPwXvHcLhy7V0b/z77QauGlGBqoVvXsagy9IcRyAbp1uHbpVuErLgkCbMQBY7p/nshCx5T/PQBFnbG02hDrKeMk0uAtkY3QZ0S3RTkAX7NOEgZDVnNF9dkDXc0jylIGt9pbmuh6y7THNSDdkI3TZ083QzkAW7dMOQRU9pSmnI+uhuoGp/oXnvgKjlmeYjDVHqkabUC1HzHU05A1GiSBMOQRQv0ISjENVe0E1AFMvTTUMUzdHNQRQ5oluBKNij24Qo2KLbCSBaozuIQLRIl41CNEuXj0I0SXcWg2qZ5iIO3XjIYgKV6C8k8e+P+AHSCVwAt/Q8GwAAAABJRU5ErkJggg==&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script src=&quot;address.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;上面那部分是基本的html，加上样式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br></pre></td><td class="code"><pre><span class="line">body, html &#123;</span><br><span class="line">    -webkit-user-select: none;</span><br><span class="line">    user-select: none</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">html &#123;</span><br><span class="line">    -webkit-text-size-adjust: 100%</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">body &#123;</span><br><span class="line">    line-height: 1.6;</span><br><span class="line">    background-color: #f5f5f9;</span><br><span class="line">    color: #4a4a4a;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">    font-family: Arial, &apos;微软雅黑&apos;, Helvetica Neue, Helvetica, sans-serif;</span><br><span class="line">    -webkit-overflow-scrolling: touch;</span><br><span class="line">    overflow-scrolling: touch</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">* &#123;</span><br><span class="line">    margin: 0;</span><br><span class="line">    padding: 0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a img &#123;</span><br><span class="line">    border: 0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a &#123;</span><br><span class="line">    text-decoration: none;</span><br><span class="line">    -webkit-tap-highlight-color: transparent;</span><br><span class="line">    -webkit-appearance: none</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@font-face &#123;</span><br><span class="line">    font-weight: 400;</span><br><span class="line">    font-style: normal;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">    font-family: Arial, &apos;微软雅黑&apos;, Helvetica Neue, Helvetica, sans-serif</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">input, textarea &#123;</span><br><span class="line">    border: 0;</span><br><span class="line">    outline: 0;</span><br><span class="line">    -webkit-appearance: none;</span><br><span class="line">    -webkit-tap-highlight-color: transparent;</span><br><span class="line">    font-size: inherit;</span><br><span class="line">    color: inherit</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.product_details_address &#123;</span><br><span class="line">    position: relative;</span><br><span class="line">    margin: 10px;</span><br><span class="line">    padding: 10px;</span><br><span class="line">    border-radius: 8px;</span><br><span class="line">    background: #fff;</span><br><span class="line">    box-shadow: 0 2px 3px #e9e9e9;</span><br><span class="line">&#125;</span><br><span class="line">.jdshop_alignment_center, .jdshop_alignment_middle, .jdshop_alignment_right, .jdshow_center_center &#123;</span><br><span class="line">    -webkit-box-align: center;</span><br><span class="line">    -webkit-align-items: center;</span><br><span class="line">    align-items: center;</span><br><span class="line">&#125;</span><br><span class="line">.jdshop_alignment_bottom, .jdshop_alignment_center, .jdshop_alignment_top &#123;</span><br><span class="line">    -webkit-box-pack: justify;</span><br><span class="line">    -webkit-justify-content: space-between;</span><br><span class="line">    justify-content: space-between;</span><br><span class="line">&#125;</span><br><span class="line">.jdshop_alignment_bottom, .jdshop_alignment_center, .jdshop_alignment_left, .jdshop_alignment_middle, .jdshop_alignment_right, .jdshop_alignment_top, .jdshow_center_center &#123;</span><br><span class="line">    display: -webkit-box;</span><br><span class="line">    display: -webkit-flex;</span><br><span class="line">    display: flex;</span><br><span class="line">&#125;</span><br><span class="line">.details_address &#123;</span><br><span class="line">    display: -webkit-box;</span><br><span class="line">    display: -webkit-flex;</span><br><span class="line">    display: flex;</span><br><span class="line">    -webkit-box-align: center;</span><br><span class="line">    -webkit-align-items: center;</span><br><span class="line">    align-items: center;</span><br><span class="line">&#125;</span><br><span class="line">.product_details_address .choose_address .details_address div:first-child &#123;</span><br><span class="line">    height: 22px;</span><br><span class="line">&#125;</span><br><span class="line">.details_address div &#123;</span><br><span class="line">    display: -webkit-box;</span><br><span class="line">    display: -webkit-flex;</span><br><span class="line">    display: flex;</span><br><span class="line">    -webkit-box-align: center;</span><br><span class="line">    -webkit-align-items: center;</span><br><span class="line">    align-items: center;</span><br><span class="line">&#125;</span><br><span class="line">.product_details_address .choose_address .details_address span:first-child &#123;</span><br><span class="line">    color: #8a8a8a;</span><br><span class="line">&#125;</span><br><span class="line">.product_details_address .choose_address .details_address span &#123;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    color: #4a4a4a;</span><br><span class="line">    margin-right: 10px;</span><br><span class="line">    max-width: 170px;</span><br><span class="line">    white-space: nowrap;</span><br><span class="line">    text-overflow: ellipsis;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line">.product_details_address .choose_address .details_address img &#123;</span><br><span class="line">    width: 18px;</span><br><span class="line">    height: 18px;</span><br><span class="line">    margin: 2px 10px 2px 0;</span><br><span class="line">&#125;</span><br><span class="line">.product_details_address .choose_address .details_address span &#123;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    color: #4a4a4a;</span><br><span class="line">    margin-right: 10px;</span><br><span class="line">    max-width: 170px;</span><br><span class="line">    white-space: nowrap;</span><br><span class="line">    text-overflow: ellipsis;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line">.but&#123;</span><br><span class="line">    margin: 0 auto;</span><br><span class="line">    width: calc(50%);</span><br><span class="line">    height: 30px;</span><br><span class="line">    margin-top: 100px;</span><br><span class="line">    background-color: lightcyan;</span><br><span class="line">    line-height: 30px;</span><br><span class="line">    text-align: center;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">&#125;</span><br><span class="line">.jdshop_alignment_middle&#123;</span><br><span class="line">    -webkit-box-align: center;</span><br><span class="line">    -webkit-align-items: center;</span><br><span class="line">    align-items: center;</span><br><span class="line">    -webkit-box-pack: start;</span><br><span class="line">    -webkit-justify-content: flex-start;</span><br><span class="line">    justify-content: flex-start;</span><br><span class="line">    display: -webkit-box;</span><br><span class="line">    display: -webkit-flex;</span><br><span class="line">    display: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.yls_address_bg &#123;</span><br><span class="line">    position: fixed;</span><br><span class="line">    top: 0;</span><br><span class="line">    left: 0;</span><br><span class="line">    height: 100%;</span><br><span class="line">    width: 100%;</span><br><span class="line">    background: #000;</span><br><span class="line">    z-index: 500;</span><br><span class="line">    opacity: .3;</span><br><span class="line">    -webkit-transition: opacity .3s;</span><br><span class="line">    transition: opacity .3s;</span><br><span class="line">    touch-action: none</span><br><span class="line">&#125;</span><br><span class="line">.yls_address_main &#123;</span><br><span class="line">    position: fixed;</span><br><span class="line">    left: 0;</span><br><span class="line">    width: 100%;</span><br><span class="line">    bottom: 0;</span><br><span class="line">    background: #fff;</span><br><span class="line">    border-radius: 10px 10px 0 0;</span><br><span class="line">    box-shadow: 0 0 3px #e9e9e9;</span><br><span class="line">    -webkit-transform: translate3d(0, 120%, 0);</span><br><span class="line">    transform: translate3d(0, 120%, 0);</span><br><span class="line">    -webkit-transition: -webkit-transform .3s;</span><br><span class="line">    transition: -webkit-transform .3s;</span><br><span class="line">    transition: transform .3s;</span><br><span class="line">    transition: transform .3s, -webkit-transform .3s;</span><br><span class="line">    z-index: 1001;</span><br><span class="line">    transform: translate3d(0, 0, 0);</span><br><span class="line">&#125;</span><br><span class="line">.yls_address_pop_top &#123;</span><br><span class="line">    text-align: center;</span><br><span class="line">    height: 50px;</span><br><span class="line">    margin-bottom: 5px;</span><br><span class="line">&#125;</span><br><span class="line">.yls_address_pop_title &#123;</span><br><span class="line">    height: 100%;</span><br><span class="line">    line-height: 50px;</span><br><span class="line">&#125;</span><br><span class="line">.yls_address_pop_cancel &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    right: 0;</span><br><span class="line">    top: 0;</span><br><span class="line">    width: 50px;</span><br><span class="line">    height: 50px;</span><br><span class="line">&#125;</span><br><span class="line">.yls_address_pop_cancel::before, .yls_address_pop_cancel::after &#123;</span><br><span class="line">    content: &apos;&apos;;</span><br><span class="line">    width: 16px;</span><br><span class="line">    height: 1px;</span><br><span class="line">    background: #000;</span><br><span class="line">    display: block;</span><br><span class="line">    position: absolute;</span><br><span class="line">    right: 10px;</span><br><span class="line">    top: 25px;</span><br><span class="line">&#125;</span><br><span class="line">.yls_address_pop_cancel::before &#123;</span><br><span class="line">    transform: rotate(45deg); /*进行旋转*/</span><br><span class="line">&#125;</span><br><span class="line">.yls_address_pop_cancel::after &#123;</span><br><span class="line">    transform: rotate(-45deg);</span><br><span class="line">&#125;</span><br><span class="line">.yls_address_pop_main &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">.yls_address_product&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">.yls_address_select&#123;</span><br><span class="line">    height: calc(60vh);</span><br><span class="line">    width: 100%;</span><br><span class="line">    position: relative;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line">.yls_address_top_address&#123;</span><br><span class="line">    font-size: 12px;</span><br><span class="line">    height: 35px;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">    border-bottom: 1px solid #ddd;</span><br><span class="line">&#125;</span><br><span class="line">.yls_address_top_address&gt;div&#123;</span><br><span class="line">    padding: 5px 5px;</span><br><span class="line">    margin: 0 5px;</span><br><span class="line">    white-space: nowrap;</span><br><span class="line">&#125;</span><br><span class="line">.yls_address_top_address&gt;div.show&#123;</span><br><span class="line">    color: #c91623;</span><br><span class="line">    border-bottom: #c91623 1px solid;</span><br><span class="line">&#125;</span><br><span class="line">.yls_address&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    left: 0;</span><br><span class="line">    top: 45px;</span><br><span class="line">    overflow: auto;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: calc(60vh - 35px);</span><br><span class="line">    -webkit-transform: translate3d(-100%,0,0);</span><br><span class="line">    transform: translate3d(-100%,0,0);</span><br><span class="line">    -webkit-transition: -webkit-transform .3s .2s;</span><br><span class="line">    transition: -webkit-transform .3s .2s;</span><br><span class="line">    transition: transform .3s .2s;</span><br><span class="line">    transition: transform .3s .2s,-webkit-transform .3s .2s;</span><br><span class="line">&#125;</span><br><span class="line">.yls_address p&#123;</span><br><span class="line">    padding: 8px 10px;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">&#125;</span><br><span class="line">.yls_address p.p_show &#123;</span><br><span class="line">    position: relative;</span><br><span class="line">    color: #c91623;</span><br><span class="line">&#125;</span><br><span class="line">.yls_address.show &#123;</span><br><span class="line">    -webkit-transform: translate3d(0,0,0);</span><br><span class="line">    transform: translate3d(0,0,0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;上面css部分也是包含弹出框样式的，只是弹出框部分的html没有放在页面上，而是每次弹出的时候动态添加到页面上的，这样出来的效果是这样的，没啥别的，<br><img src="https://upload-images.jianshu.io/upload_images/1062695-e590f9ac4fda84c3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="效果图1"></p>
<h1 id="第三步-了解调用方法数据结构"><a href="#第三步-了解调用方法数据结构" class="headerlink" title="第三步:了解调用方法数据结构"></a>第三步:了解调用方法数据结构</h1><p>&#160;&#160;&#160;&#160;点击显示弹框的方法show中，需要这么写。其实这部分应该在完成整个js之后写的，不过放在前面也一样。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">function show() &#123;</span><br><span class="line">        // 一般情况，在调用的时候，获取当前最新的地址数据，和对应的id</span><br><span class="line">        var startId = [1804,1805,1829,1831];</span><br><span class="line">        var startName = [&apos;北京市&apos;,&apos;北京市&apos;,&apos;朝阳区&apos;,&apos;朝外街道&apos;];</span><br><span class="line">        var url = &apos;&apos;;//你的请求url信息</span><br><span class="line"></span><br><span class="line">        //声明对象，存放请求数据url，地址信息，和需要显示最后选择地址的元素，加上一个回调方法用来获取选择完毕之后的地址。</span><br><span class="line">        var details = &#123;</span><br><span class="line">            url:url,</span><br><span class="line">            startId:startId,</span><br><span class="line">            startName:startName,</span><br><span class="line">            targetDom:document.getElementById(&apos;product_address_show&apos;),</span><br><span class="line">            fn:function () &#123;</span><br><span class="line">                //在点击四级地址之后回调方法中可以获取到相应的数据</span><br><span class="line">                console.log(yls_address.CityArr);</span><br><span class="line">                console.log(yls_address.CityIdArr);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        //调用run方法进行弹出框以及选择地址。</span><br><span class="line">        yls_address.run(details)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h1 id="第四步-编辑逻辑部分"><a href="#第四步-编辑逻辑部分" class="headerlink" title="第四步:编辑逻辑部分"></a>第四步:编辑逻辑部分</h1><h4 id="1-声明对象，声明方法"><a href="#1-声明对象，声明方法" class="headerlink" title="1:声明对象，声明方法"></a>1:声明对象，声明方法</h4><p>&#160;&#160;&#160;&#160;html部分的东西就这么多，上面这个其实就是使用方法，接下来是js文件的内容。有点不知道怎么分解了说了。<br>首先就是声明一个对象，在对象中声明一个方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var yls_address = &#123;</span><br><span class="line">//details就是调用的时候传进来的方法</span><br><span class="line">    run: function (details) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-处理传递过来的数据，创建不同的变量赋值"><a href="#2-处理传递过来的数据，创建不同的变量赋值" class="headerlink" title="2:处理传递过来的数据，创建不同的变量赋值"></a>2:处理传递过来的数据，创建不同的变量赋值</h4><p>&#160;&#160;&#160;&#160;接下来是先获取传过来details里面的一些数据。在run里面写</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">var _this = this;</span><br><span class="line">//初始化id</span><br><span class="line">var thisStartId = details.startId;</span><br><span class="line">//初始化Name</span><br><span class="line">var thisStartName = details.startName;</span><br><span class="line">//获取请求url</span><br><span class="line">var thisUrl = details.url || &apos;&apos;;</span><br><span class="line">//获取回调方法</span><br><span class="line">var thisFn = details.fn || &apos;&apos;;</span><br><span class="line">//获取最后需要显示地址信息的元素，可有可无的</span><br><span class="line">var thisWrightHtml = details.targetDom || &apos;&apos;;</span><br><span class="line"></span><br><span class="line">//因为要经常获取元素，所以把前缀单独声明了</span><br><span class="line">var ylsAd =  &apos;yls_address_&apos;;</span><br><span class="line">var ylsTopAd =  &apos;yls_top_address_&apos;;</span><br><span class="line"></span><br><span class="line">//判断初始数据是否正确</span><br><span class="line">if (thisStartName.length === thisStartName.length) &#123;</span><br><span class="line">    initHtml();//初始化html</span><br><span class="line">    getData(0, 1, thisStartName[0],1);//获取数据</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    console.log(&apos;初始值出问题了&apos;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-初始化弹框html，添加到页面上"><a href="#3-初始化弹框html，添加到页面上" class="headerlink" title="3:初始化弹框html，添加到页面上"></a>3:初始化弹框html，添加到页面上</h4><p>&#160;&#160;&#160;&#160;initHtml()这方法就是创建html并且初始化渲染到页面上，getData方法就是调用接口获取地址数据的。接下来就是初始化方法和获取数据方法的编写了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"> /**</span><br><span class="line"> *</span><br><span class="line"> 初始化弹出框的html，去除一些样式</span><br><span class="line"> *</span><br><span class="line"> @method initHtml</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">function initHtml() &#123;</span><br><span class="line">    //生成html添加到页面</span><br><span class="line">    var thisInnerHtml = &apos;&lt;div class=&quot;yls_address_bg&quot;&gt;&lt;/div&gt;&apos; +</span><br><span class="line">        &apos;&lt;div class=&quot;yls_address_main&quot;&gt;&apos; +</span><br><span class="line">        &apos; &lt;div class=&quot;yls_address_pop_top&quot;&gt;&apos; +</span><br><span class="line">        &apos;&lt;div class=&quot;yls_address_pop_title&quot;&gt;请选择地址&lt;/div&gt;&apos; +</span><br><span class="line">        &apos;&lt;div class=&quot;yls_address_pop_cancel&quot;&gt;&lt;/div&gt;&apos; +</span><br><span class="line">        &apos;&lt;/div&gt;&apos; +</span><br><span class="line">        &apos;&lt;div class=&quot;yls_address_pop_main&quot;&gt;&apos; +</span><br><span class="line">        &apos;&lt;div class=&quot;yls_address_product&quot;&gt;&apos; +</span><br><span class="line">        &apos;&lt;div class=&quot;yls_address_select&quot;&gt;&apos; +</span><br><span class="line">        &apos;&lt;div class=&quot;yls_address_top_address jdshop_alignment_middle&quot;&gt;&apos; +</span><br><span class="line">        &apos;&lt;div id=&quot;yls_top_address_1&quot;&gt;请选择&lt;/div&gt;&apos; +</span><br><span class="line">        &apos;&lt;div id=&quot;yls_top_address_2&quot;&gt;&lt;/div&gt;&apos; +</span><br><span class="line">        &apos;&lt;div id=&quot;yls_top_address_3&quot;&gt;&lt;/div&gt;&apos; +</span><br><span class="line">        &apos;&lt;div id=&quot;yls_top_address_4&quot;&gt;&lt;/div&gt;&apos; +</span><br><span class="line">        &apos;&lt;div id=&quot;yls_top_address_5&quot;&gt;&lt;/div&gt;&apos; +</span><br><span class="line">        &apos;&lt;/div&gt;&apos; +</span><br><span class="line">        &apos;&lt;div class=&quot;yls_address&quot; id=&quot;yls_address_1&quot;&gt;&lt;/div&gt;&apos; +</span><br><span class="line">        &apos;&lt;div class=&quot;yls_address&quot; id=&quot;yls_address_2&quot;&gt;&lt;/div&gt;&apos; +</span><br><span class="line">        &apos;&lt;div class=&quot;yls_address&quot; id=&quot;yls_address_3&quot;&gt;&lt;/div&gt;&apos; +</span><br><span class="line">        &apos;&lt;div class=&quot;yls_address&quot; id=&quot;yls_address_4&quot;&gt;&lt;/div&gt;&apos; +</span><br><span class="line">        &apos;&lt;div class=&quot;yls_address&quot; id=&quot;yls_address_5&quot;&gt;&lt;/div&gt;&apos; +</span><br><span class="line">        &apos;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&apos;;</span><br><span class="line"></span><br><span class="line">    addNode(&quot;div&quot;, thisInnerHtml, &quot;yls_address_choose&quot;, &apos;&apos;);</span><br><span class="line">    for(var i = 1; i &lt;= thisStartId.length;i++)&#123;</span><br><span class="line">        //获取每个地址列表</span><br><span class="line">        var ad = document.getElementById(ylsAd + i);</span><br><span class="line">        //获取四个顶部选中的地址</span><br><span class="line">        var topad = document.getElementById(ylsTopAd + i);</span><br><span class="line">        //清空地址列表</span><br><span class="line">        ad.innerHTML = &apos;&apos;;</span><br><span class="line">        //清空地址列表</span><br><span class="line">        ad.className = &apos;yls_address&apos;;</span><br><span class="line">        //初始化列表的样式</span><br><span class="line">        topad.innerHTML = &apos;&apos;;</span><br><span class="line">        //清空选中地址的样式</span><br><span class="line">        topad.removeAttribute(&apos;class&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> /**</span><br><span class="line"> *</span><br><span class="line"> 为页面添加html</span><br><span class="line"> *</span><br><span class="line"> @method addNode</span><br><span class="line"> *</span><br><span class="line"> @param tag 标签</span><br><span class="line"> *</span><br><span class="line"> @param innerHtml 标签内html</span><br><span class="line"> *</span><br><span class="line"> @param id 标签id</span><br><span class="line"> *</span><br><span class="line"> @param className 标签样式</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">function addNode(tag, innerHtml, id, className) &#123;</span><br><span class="line">    var obj = document.createElement(tag);</span><br><span class="line">    if (id) &#123;</span><br><span class="line">        obj.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    if(className)&#123;</span><br><span class="line">        obj.className=className</span><br><span class="line">    &#125;</span><br><span class="line">    obj.innerHTML = innerHtml;</span><br><span class="line">    document.body.appendChild(obj);</span><br><span class="line">    return obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-绑定关闭弹框事件，移除相应元素"><a href="#4-绑定关闭弹框事件，移除相应元素" class="headerlink" title="4:绑定关闭弹框事件，移除相应元素"></a>4:绑定关闭弹框事件，移除相应元素</h4><p>&#160;&#160;&#160;&#160;再添加html到页面之后 并初始化，情况里面的内容，然后循环调用接口获取初始化的四级内容。不过与此同时先把背景和叉叉按钮上添加关闭弹框的点击事件，并且将移除元素的方法也写上。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"> //绑定关闭按钮方法</span><br><span class="line">document.getElementsByClassName(&apos;yls_address_pop_cancel&apos;)[0].addEventListener(&quot;click&quot;,hideAddress,false);</span><br><span class="line">document.getElementsByClassName(&apos;yls_address_bg&apos;)[0].addEventListener(&quot;click&quot;,hideAddress,false);</span><br><span class="line"> /**</span><br><span class="line"> *</span><br><span class="line"> 将数据渲染到当前列表的方法</span><br><span class="line"> *</span><br><span class="line"> @method remove</span><br><span class="line"> *</span><br><span class="line"> @param _element 删除的元素</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">function remove(_element) &#123;</span><br><span class="line">    var _parentElement = _element.parentNode;//找到父元素，然后删除</span><br><span class="line">    if (_parentElement) &#123;</span><br><span class="line">        _parentElement.removeChild(_element);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> /**</span><br><span class="line"> *</span><br><span class="line"> 隐藏弹框</span><br><span class="line"> *</span><br><span class="line"> @method hideAddress</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">function hideAddress() &#123;</span><br><span class="line">    remove(document.getElementById(&quot;yls_address_choose&quot;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="5-获取地址数据"><a href="#5-获取地址数据" class="headerlink" title="5:获取地址数据"></a>5:获取地址数据</h4><p>&#160;&#160;&#160;&#160;获取数据方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"> /**</span><br><span class="line"> *</span><br><span class="line"> 获取地址列表数据方法</span><br><span class="line"> *</span><br><span class="line"> @method getData</span><br><span class="line"> *</span><br><span class="line"> @param areaId 点选地址的areaid</span><br><span class="line"> *</span><br><span class="line"> @param addressNum yls_address是第几个</span><br><span class="line"> *</span><br><span class="line"> @param name 是点击选择的地址name</span><br><span class="line"> *</span><br><span class="line"> @param isInit 是点是初始化，1是初始化，0不是初始化</span><br><span class="line"> *</span><br><span class="line"> @return 返回值说明</span><br><span class="line"> */</span><br><span class="line">function getData(areaId, addressNum, name, isInit)&#123;</span><br><span class="line">    addressNum = parseInt(addressNum);//转成数字，防止变成字符串</span><br><span class="line">    isInit = parseInt(isInit);//转成数字，防止变成字符串</span><br><span class="line">    var addressUrl = thisUrl + areaId;</span><br><span class="line">    //请求数据</span><br><span class="line">    var xhr = function () &#123;</span><br><span class="line"></span><br><span class="line">        if (window.XMLHttpRequest) &#123;</span><br><span class="line">            return new XMLHttpRequest();</span><br><span class="line">        &#125;</span><br><span class="line">        else &#123;</span><br><span class="line">            return new ActiveObject(&apos;Micrsorf.XMLHttp&apos;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;();</span><br><span class="line">    xhr.onreadystatechange = function () &#123;</span><br><span class="line">        if(xhr.readyState === 4 &amp;&amp; xhr.status === 200)&#123;</span><br><span class="line"></span><br><span class="line">            var res = JSON.parse(xhr.responseText);</span><br><span class="line">            // console.log(res.result);</span><br><span class="line">            if (isInit === 1 &amp;&amp; addressNum &lt; thisStartId.length) &#123;</span><br><span class="line">                //初始化的时候循环请求数据</span><br><span class="line">                getData(thisStartId[addressNum - 1], (addressNum + 1), thisStartName[addressNum],1);</span><br><span class="line">            &#125;</span><br><span class="line">            setPages(res.result, areaId, addressNum, name, isInit);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    xhr.open(&apos;get&apos;, addressUrl);</span><br><span class="line">    xhr.send(null);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="6-设置显示html，渲染页面，绑定相应的点击事件"><a href="#6-设置显示html，渲染页面，绑定相应的点击事件" class="headerlink" title="6:设置显示html，渲染页面，绑定相应的点击事件"></a>6:设置显示html，渲染页面，绑定相应的点击事件</h4><p>&#160;&#160;&#160;&#160;获取数据请求全部都是用原生方法请求，然后成功获取数据之后进行循环请求，然后渲染页面方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"> /**</span><br><span class="line"> *</span><br><span class="line"> 将数据渲染到当前列表的方法</span><br><span class="line"> *</span><br><span class="line"> @method setPages</span><br><span class="line"> *</span><br><span class="line"> @param data 获取到第addressNum列的数据</span><br><span class="line"> *</span><br><span class="line"> @param areaId 点选地址的areaid</span><br><span class="line"> *</span><br><span class="line"> @param addressNum yls_address是第几个</span><br><span class="line"> *</span><br><span class="line"> @param name 是点击选择的地址name</span><br><span class="line"> *</span><br><span class="line"> @param isInit 是点是初始化，1是初始化，0不是初始化</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">function setPages(data, areaId, addressNum, name, isInit) &#123;</span><br><span class="line">    //转成数字，防止变成字符串</span><br><span class="line">    addressNum = parseInt(addressNum);</span><br><span class="line">    //转成数字，防止变成字符串</span><br><span class="line">    isInit = parseInt(isInit);</span><br><span class="line">    //声明变量以获得当前需要做处理的列表</span><br><span class="line">    var current = 0;</span><br><span class="line">    isInit === 1 ? current = addressNum : current = addressNum - 1;</span><br><span class="line">    //获取当前需要渲染的地址列表</span><br><span class="line">    var current_address = document.getElementById(ylsAd + current);</span><br><span class="line">    //获取当前列表选中地址的顶部tab div</span><br><span class="line">    var current_topAddress = document.getElementById(ylsTopAd + current);</span><br><span class="line"></span><br><span class="line">    if(isInit === 1)&#123;</span><br><span class="line">        //是初始化页面</span><br><span class="line">        if (addressNum === thisStartId.length) &#123;</span><br><span class="line">            //当渲染到最后一个列表的时候，添加上show，让他显示</span><br><span class="line">            current_address.className = &apos;yls_address show&apos;;</span><br><span class="line">            current_topAddress.className = &apos;show&apos;;</span><br><span class="line">        &#125;</span><br><span class="line">        //当前标题tab上的name添加上去</span><br><span class="line">        current_topAddress.innerHTML = name;</span><br><span class="line">        //为每个标题tab设置属性</span><br><span class="line">        current_topAddress.setAttribute(&apos;areaId&apos;, thisStartId[addressNum - 1]);</span><br><span class="line">        //为每个标题tab添加点击事件</span><br><span class="line">        current_topAddress.addEventListener(&quot;click&quot;, function () &#123;</span><br><span class="line">            //获取到id上最后一位数字，然后根据数字进行相应的隐藏显示操作</span><br><span class="line">            var areaId = this.getAttribute(&apos;areaid&apos;);</span><br><span class="line">            var id_no = parseInt(current);</span><br><span class="line">            //循环进行判断添加显示</span><br><span class="line">            for (var i = 1; i &lt; 5; i++) &#123;</span><br><span class="line">                var top_id = &apos;yls_top_address_&apos; + i;//获取到每一个顶部tab的id</span><br><span class="line">                var ad_id = &apos;yls_address_&apos; + i;//获取到每一个列表address的id</span><br><span class="line">                document.getElementById(top_id).removeAttribute(&apos;class&apos;);</span><br><span class="line">                document.getElementById(ad_id).className = &apos;yls_address&apos;;</span><br><span class="line">                if (i === id_no) &#123;</span><br><span class="line">                    document.getElementById(top_id).className = &apos;show&apos;;</span><br><span class="line">                    document.getElementById(ad_id).className = &apos;yls_address show&apos;;</span><br><span class="line">                &#125;</span><br><span class="line">                if (i &gt; id_no) &#123;</span><br><span class="line">                    document.getElementById(top_id).innerHTML = &apos;&apos;;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            //更新数据，截取到前面几位</span><br><span class="line">            thisStartId = thisStartId.slice(0, addressNum);</span><br><span class="line">            thisStartName = thisStartName.slice(0, addressNum);</span><br><span class="line">            // console.log(thisStartId);</span><br><span class="line">        &#125;, false);</span><br><span class="line">        //清空列表html，拼接html</span><br><span class="line">        current_address.innerHTML = &apos;&apos;;</span><br><span class="line">        //拼接html添加到div中</span><br><span class="line">        setHtmls(current_address,data,addressNum, isInit);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        //不是初始化页面</span><br><span class="line"></span><br><span class="line">        //获取到下一级渲染列表的div</span><br><span class="line">        var next_address = document.getElementById(ylsAd + addressNum);</span><br><span class="line">        //获取到要下一级列表顶部的tab div</span><br><span class="line">        var next_topAddress = document.getElementById(ylsTopAd + addressNum);</span><br><span class="line">        //下一级标题显示请选择</span><br><span class="line">        next_topAddress.innerHTML=&apos;请选择&apos;;</span><br><span class="line">        //下一级标题添加红色样式</span><br><span class="line">        next_topAddress.className=&apos;show&apos;;</span><br><span class="line">        //当前标题去除红色样式</span><br><span class="line">        current_topAddress.removeAttribute(&apos;class&apos;);</span><br><span class="line">        //当前列表去除显示样式</span><br><span class="line">        current_address.className = &apos;yls_address&apos;;</span><br><span class="line">        //下一级列表添加显示样式</span><br><span class="line">        next_address.className =&apos;yls_address show&apos;;</span><br><span class="line">        //下一级列表情况</span><br><span class="line">        next_address.innerHTML = &apos;&apos;;</span><br><span class="line">        //拼接html添加到div中</span><br><span class="line">        setHtmls(next_address,data,addressNum, isInit);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">/**</span><br><span class="line"> *</span><br><span class="line"> 拼接html，添加到div中，并且绑定点击事件</span><br><span class="line"> *</span><br><span class="line"> @method setHtmls</span><br><span class="line"> *</span><br><span class="line"> @param data 获取到第addressNum列的数据</span><br><span class="line"> *</span><br><span class="line"> @param faEle 需要添加html的列表div</span><br><span class="line"> *</span><br><span class="line"> @param addressNum yls_address是第几个</span><br><span class="line"> *</span><br><span class="line"> @param isInit 是点是初始化，1是初始化，0不是初始化</span><br><span class="line"> */</span><br><span class="line">function setHtmls(faEle, data, addressNum, isInit) &#123;</span><br><span class="line">    //拼接html</span><br><span class="line">    var html = &apos;&apos;;</span><br><span class="line">    if (data) &#123;</span><br><span class="line">        for (var i = 0; i &lt; data.length; i++) &#123;</span><br><span class="line">            if ((thisStartName[addressNum - 1] === data[i].name) &amp;&amp; isInit === 1) &#123;</span><br><span class="line">                html += &apos;&lt;p class=&quot;p_show&quot; id=&quot;add_&apos; + data[i].areaId + &apos;&quot;  addressNum=&quot;&apos; + addressNum + &apos;&quot; areaId=&quot;&apos;+data[i].areaId+&apos;&quot;&gt;&apos; + data[i].name + &apos;&lt;/p&gt;&apos;;</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                html += &apos;&lt;p id=&quot;add_&apos; + data[i].areaId + &apos;&quot;  addressNum=&quot;&apos; + addressNum + &apos;&quot; areaId=&quot;&apos;+data[i].areaId+&apos;&quot;&gt;&apos; + data[i].name + &apos;&lt;/p&gt;&apos;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        faEle.innerHTML = html;</span><br><span class="line">    &#125;</span><br><span class="line">    //绑定点击事件</span><br><span class="line">    var allP = faEle.getElementsByTagName(&apos;p&apos;);</span><br><span class="line">    for (var j = 0; j &lt; allP.length; j++) &#123;</span><br><span class="line">        allP[j].addEventListener(&apos;click&apos;, chooseAddress, false)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="7-实现点击地址列表中地址的方法"><a href="#7-实现点击地址列表中地址的方法" class="headerlink" title="7:实现点击地址列表中地址的方法"></a>7:实现点击地址列表中地址的方法</h4><p>&#160;&#160;&#160;&#160;与此同时在方法中要为各个点击区域添加上点击事件，相应的切换四级的点击事件和具体点击选择当前列表中地址的点击事件。之后就是详细写明点击选择地址的时候触发的事件了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"> /**</span><br><span class="line"> *</span><br><span class="line"> 点击列表中的地址触发的方法</span><br><span class="line"> *</span><br><span class="line"> @method chooseAddress</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">function chooseAddress() &#123;</span><br><span class="line">    //获取现在点击的城市的id</span><br><span class="line">    var areaId = this.getAttribute(&apos;id&apos;).split(&apos;_&apos;)[1];</span><br><span class="line">    //获取我点击地址在第几个列表中</span><br><span class="line">    var addressNum = parseInt(this.getAttribute(&apos;addressNum&apos;));</span><br><span class="line">    //获取现在点击的城市的name</span><br><span class="line">    var name = this.innerHTML;</span><br><span class="line">    //更新数据</span><br><span class="line">    // console.log(parseInt(areaId));</span><br><span class="line">    thisStartId[addressNum-1] = parseInt(areaId);</span><br><span class="line">    thisStartName[addressNum-1] = name;</span><br><span class="line"></span><br><span class="line">    //获取当前需要渲染的地址列表</span><br><span class="line">    var current_address = document.getElementById(ylsAd + addressNum);</span><br><span class="line">    //获取当前列表选中地址的顶部tab div</span><br><span class="line">    var current_topAddress = document.getElementById(ylsTopAd + addressNum);</span><br><span class="line">    //移除当前列表中所有的标红样式，然后添加到新选择的上面</span><br><span class="line">    var pEles = current_address.getElementsByTagName(&apos;p&apos;);</span><br><span class="line">    //是否对应areaId,不等于的将样式移除</span><br><span class="line">    for(var i=0;i&lt;pEles.length;i++)&#123;</span><br><span class="line">        if(thisStartId[addressNum-1] === parseInt(pEles[i].getAttribute(&apos;areaId&apos;)))&#123;</span><br><span class="line">            pEles[i].className = &apos;p_show&apos;;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            pEles[i].removeAttribute(&apos;class&apos;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    //当前顶部tab换成点选的地址</span><br><span class="line">    current_topAddress.innerHTML=name;</span><br><span class="line"></span><br><span class="line">    //判断是否是最后一个列表，如果是，就不用请求新的数据，如果不是，就请求新的数据。</span><br><span class="line">    if(addressNum === 4)&#123;</span><br><span class="line">        //将文字显示到页面上</span><br><span class="line">        thisWrightHtml.innerHTML = thisStartName;</span><br><span class="line">        _this.CityArr = thisStartName;</span><br><span class="line">        _this.CityIdArr = thisStartId;</span><br><span class="line">        hideAddress();</span><br><span class="line">        setTimeout(function () &#123;</span><br><span class="line">            thisFn();</span><br><span class="line">        &#125;,300)</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        //重新请求数据</span><br><span class="line">        getData(areaId, (addressNum+1), name, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;写的有点乱，下面我就把整个js放出来，大家要是觉得上面的乱，可以看下面一目了然的代码。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br></pre></td><td class="code"><pre><span class="line">var yls_address = &#123;</span><br><span class="line">    run: function (details) &#123;</span><br><span class="line">        var _this = this;</span><br><span class="line">        //初始化id</span><br><span class="line">        var thisStartId = details.startId;</span><br><span class="line">        //初始化Name</span><br><span class="line">        var thisStartName = details.startName;</span><br><span class="line">        //获取请求url</span><br><span class="line">        var thisUrl = details.url || &apos;&apos;;</span><br><span class="line">        //获取回调方法</span><br><span class="line">        var thisFn = details.fn || &apos;&apos;;</span><br><span class="line">        //获取最后需要显示地址信息的元素，可有可无的</span><br><span class="line">        var thisWrightHtml = details.targetDom || &apos;&apos;;</span><br><span class="line"></span><br><span class="line">        //因为要经常获取元素，所以把前缀单独声明了</span><br><span class="line">        var ylsAd =  &apos;yls_address_&apos;;</span><br><span class="line">        var ylsTopAd =  &apos;yls_top_address_&apos;;</span><br><span class="line"></span><br><span class="line">        //判断初始数据是否正确</span><br><span class="line">        if (thisStartName.length === thisStartName.length) &#123;</span><br><span class="line">            initHtml();//初始化html</span><br><span class="line">            getData(0, 1, thisStartName[0],1);//获取数据</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            console.log(&apos;初始值出问题了&apos;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //绑定关闭按钮方法</span><br><span class="line">        document.getElementsByClassName(&apos;yls_address_pop_cancel&apos;)[0].addEventListener(&quot;click&quot;,hideAddress,false);</span><br><span class="line">        document.getElementsByClassName(&apos;yls_address_bg&apos;)[0].addEventListener(&quot;click&quot;,hideAddress,false);</span><br><span class="line">        /**</span><br><span class="line">         *</span><br><span class="line">         初始化弹出框的html，去除一些样式</span><br><span class="line">         *</span><br><span class="line">         @method initHtml</span><br><span class="line">         *</span><br><span class="line">         */</span><br><span class="line">        function initHtml() &#123;</span><br><span class="line">            //生成html添加到页面</span><br><span class="line">            var thisInnerHtml = &apos;&lt;div class=&quot;yls_address_bg&quot;&gt;&lt;/div&gt;&apos; +</span><br><span class="line">                &apos;&lt;div class=&quot;yls_address_main&quot;&gt;&apos; +</span><br><span class="line">                &apos; &lt;div class=&quot;yls_address_pop_top&quot;&gt;&apos; +</span><br><span class="line">                &apos;&lt;div class=&quot;yls_address_pop_title&quot;&gt;请选择地址&lt;/div&gt;&apos; +</span><br><span class="line">                &apos;&lt;div class=&quot;yls_address_pop_cancel&quot;&gt;&lt;/div&gt;&apos; +</span><br><span class="line">                &apos;&lt;/div&gt;&apos; +</span><br><span class="line">                &apos;&lt;div class=&quot;yls_address_pop_main&quot;&gt;&apos; +</span><br><span class="line">                &apos;&lt;div class=&quot;yls_address_product&quot;&gt;&apos; +</span><br><span class="line">                &apos;&lt;div class=&quot;yls_address_select&quot;&gt;&apos; +</span><br><span class="line">                &apos;&lt;div class=&quot;yls_address_top_address jdshop_alignment_middle&quot;&gt;&apos; +</span><br><span class="line">                &apos;&lt;div id=&quot;yls_top_address_1&quot;&gt;请选择&lt;/div&gt;&apos; +</span><br><span class="line">                &apos;&lt;div id=&quot;yls_top_address_2&quot;&gt;&lt;/div&gt;&apos; +</span><br><span class="line">                &apos;&lt;div id=&quot;yls_top_address_3&quot;&gt;&lt;/div&gt;&apos; +</span><br><span class="line">                &apos;&lt;div id=&quot;yls_top_address_4&quot;&gt;&lt;/div&gt;&apos; +</span><br><span class="line">                &apos;&lt;div id=&quot;yls_top_address_5&quot;&gt;&lt;/div&gt;&apos; +</span><br><span class="line">                &apos;&lt;/div&gt;&apos; +</span><br><span class="line">                &apos;&lt;div class=&quot;yls_address&quot; id=&quot;yls_address_1&quot;&gt;&lt;/div&gt;&apos; +</span><br><span class="line">                &apos;&lt;div class=&quot;yls_address&quot; id=&quot;yls_address_2&quot;&gt;&lt;/div&gt;&apos; +</span><br><span class="line">                &apos;&lt;div class=&quot;yls_address&quot; id=&quot;yls_address_3&quot;&gt;&lt;/div&gt;&apos; +</span><br><span class="line">                &apos;&lt;div class=&quot;yls_address&quot; id=&quot;yls_address_4&quot;&gt;&lt;/div&gt;&apos; +</span><br><span class="line">                &apos;&lt;div class=&quot;yls_address&quot; id=&quot;yls_address_5&quot;&gt;&lt;/div&gt;&apos; +</span><br><span class="line">                &apos;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&apos;;</span><br><span class="line"></span><br><span class="line">            addNode(&quot;div&quot;, thisInnerHtml, &quot;yls_address_choose&quot;, &apos;&apos;);</span><br><span class="line">            for(var i = 1; i &lt;= thisStartId.length;i++)&#123;</span><br><span class="line">                //获取每个地址列表</span><br><span class="line">                var ad = document.getElementById(ylsAd + i);</span><br><span class="line">                //获取四个顶部选中的地址</span><br><span class="line">                var topad = document.getElementById(ylsTopAd + i);</span><br><span class="line">                //清空地址列表</span><br><span class="line">                ad.innerHTML = &apos;&apos;;</span><br><span class="line">                //清空地址列表</span><br><span class="line">                ad.className = &apos;yls_address&apos;;</span><br><span class="line">                //初始化列表的样式</span><br><span class="line">                topad.innerHTML = &apos;&apos;;</span><br><span class="line">                //清空选中地址的样式</span><br><span class="line">                topad.removeAttribute(&apos;class&apos;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        /**</span><br><span class="line">         *</span><br><span class="line">         获取地址列表数据方法</span><br><span class="line">         *</span><br><span class="line">         @method getData</span><br><span class="line">         *</span><br><span class="line">         @param areaId 点选地址的areaid</span><br><span class="line">         *</span><br><span class="line">         @param addressNum yls_address是第几个</span><br><span class="line">         *</span><br><span class="line">         @param name 是点击选择的地址name</span><br><span class="line">         *</span><br><span class="line">         @param isInit 是点是初始化，1是初始化，0不是初始化</span><br><span class="line">         *</span><br><span class="line">         @return 返回值说明</span><br><span class="line">         */</span><br><span class="line">        function getData(areaId, addressNum, name, isInit)&#123;</span><br><span class="line">            addressNum = parseInt(addressNum);//转成数字，防止变成字符串</span><br><span class="line">            isInit = parseInt(isInit);//转成数字，防止变成字符串</span><br><span class="line">            var addressUrl = thisUrl + areaId;</span><br><span class="line">            //请求数据</span><br><span class="line">            var xhr = function () &#123;</span><br><span class="line"></span><br><span class="line">                if (window.XMLHttpRequest) &#123;</span><br><span class="line">                    return new XMLHttpRequest();</span><br><span class="line">                &#125;</span><br><span class="line">                else &#123;</span><br><span class="line">                    return new ActiveObject(&apos;Micrsorf.XMLHttp&apos;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;();</span><br><span class="line">            xhr.onreadystatechange = function () &#123;</span><br><span class="line">                if(xhr.readyState === 4 &amp;&amp; xhr.status === 200)&#123;</span><br><span class="line"></span><br><span class="line">                    var res = JSON.parse(xhr.responseText);</span><br><span class="line">                    // console.log(res.result);</span><br><span class="line">                    if (isInit === 1 &amp;&amp; addressNum &lt; thisStartId.length) &#123;</span><br><span class="line">                        //初始化的时候循环请求数据</span><br><span class="line">                        getData(thisStartId[addressNum - 1], (addressNum + 1), thisStartName[addressNum],1);</span><br><span class="line">                    &#125;</span><br><span class="line">                    setPages(res.result, areaId, addressNum, name, isInit);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            xhr.open(&apos;get&apos;, addressUrl);</span><br><span class="line">            xhr.send(null);</span><br><span class="line">        &#125;</span><br><span class="line">        /**</span><br><span class="line">         *</span><br><span class="line">         将数据渲染到当前列表的方法</span><br><span class="line">         *</span><br><span class="line">         @method setPages</span><br><span class="line">         *</span><br><span class="line">         @param data 获取到第addressNum列的数据</span><br><span class="line">         *</span><br><span class="line">         @param areaId 点选地址的areaid</span><br><span class="line">         *</span><br><span class="line">         @param addressNum yls_address是第几个</span><br><span class="line">         *</span><br><span class="line">         @param name 是点击选择的地址name</span><br><span class="line">         *</span><br><span class="line">         @param isInit 是点是初始化，1是初始化，0不是初始化</span><br><span class="line">         *</span><br><span class="line">         */</span><br><span class="line">        function setPages(data, areaId, addressNum, name, isInit) &#123;</span><br><span class="line">            //转成数字，防止变成字符串</span><br><span class="line">            addressNum = parseInt(addressNum);</span><br><span class="line">            //转成数字，防止变成字符串</span><br><span class="line">            isInit = parseInt(isInit);</span><br><span class="line">            //声明变量以获得当前需要做处理的列表</span><br><span class="line">            var current = 0;</span><br><span class="line">            isInit === 1 ? current = addressNum : current = addressNum - 1;</span><br><span class="line">            //获取当前需要渲染的地址列表</span><br><span class="line">            var current_address = document.getElementById(ylsAd + current);</span><br><span class="line">            //获取当前列表选中地址的顶部tab div</span><br><span class="line">            var current_topAddress = document.getElementById(ylsTopAd + current);</span><br><span class="line"></span><br><span class="line">            if(isInit === 1)&#123;</span><br><span class="line">                //是初始化页面</span><br><span class="line">                if (addressNum === thisStartId.length) &#123;</span><br><span class="line">                    //当渲染到最后一个列表的时候，添加上show，让他显示</span><br><span class="line">                    current_address.className = &apos;yls_address show&apos;;</span><br><span class="line">                    current_topAddress.className = &apos;show&apos;;</span><br><span class="line">                &#125;</span><br><span class="line">                //当前标题tab上的name添加上去</span><br><span class="line">                current_topAddress.innerHTML = name;</span><br><span class="line">                //为每个标题tab设置属性</span><br><span class="line">                current_topAddress.setAttribute(&apos;areaId&apos;, thisStartId[addressNum - 1]);</span><br><span class="line">                //为每个标题tab添加点击事件</span><br><span class="line">                current_topAddress.addEventListener(&quot;click&quot;, function () &#123;</span><br><span class="line">                    //获取到id上最后一位数字，然后根据数字进行相应的隐藏显示操作</span><br><span class="line">                    var areaId = this.getAttribute(&apos;areaid&apos;);</span><br><span class="line">                    var id_no = parseInt(current);</span><br><span class="line">                    //循环进行判断添加显示</span><br><span class="line">                    for (var i = 1; i &lt; 5; i++) &#123;</span><br><span class="line">                        var top_id = &apos;yls_top_address_&apos; + i;//获取到每一个顶部tab的id</span><br><span class="line">                        var ad_id = &apos;yls_address_&apos; + i;//获取到每一个列表address的id</span><br><span class="line">                        document.getElementById(top_id).removeAttribute(&apos;class&apos;);</span><br><span class="line">                        document.getElementById(ad_id).className = &apos;yls_address&apos;;</span><br><span class="line">                        if (i === id_no) &#123;</span><br><span class="line">                            document.getElementById(top_id).className = &apos;show&apos;;</span><br><span class="line">                            document.getElementById(ad_id).className = &apos;yls_address show&apos;;</span><br><span class="line">                        &#125;</span><br><span class="line">                        if (i &gt; id_no) &#123;</span><br><span class="line">                            document.getElementById(top_id).innerHTML = &apos;&apos;;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    //更新数据，截取到前面几位</span><br><span class="line">                    thisStartId = thisStartId.slice(0, addressNum);</span><br><span class="line">                    thisStartName = thisStartName.slice(0, addressNum);</span><br><span class="line">                    // console.log(thisStartId);</span><br><span class="line">                &#125;, false);</span><br><span class="line">                //清空列表html，拼接html</span><br><span class="line">                current_address.innerHTML = &apos;&apos;;</span><br><span class="line">                //拼接html添加到div中</span><br><span class="line">                setHtmls(current_address,data,addressNum, isInit);</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                //不是初始化页面</span><br><span class="line"></span><br><span class="line">                //获取到下一级渲染列表的div</span><br><span class="line">                var next_address = document.getElementById(ylsAd + addressNum);</span><br><span class="line">                //获取到要下一级列表顶部的tab div</span><br><span class="line">                var next_topAddress = document.getElementById(ylsTopAd + addressNum);</span><br><span class="line">                //下一级标题显示请选择</span><br><span class="line">                next_topAddress.innerHTML=&apos;请选择&apos;;</span><br><span class="line">                //下一级标题添加红色样式</span><br><span class="line">                next_topAddress.className=&apos;show&apos;;</span><br><span class="line">                //当前标题去除红色样式</span><br><span class="line">                current_topAddress.removeAttribute(&apos;class&apos;);</span><br><span class="line">                //当前列表去除显示样式</span><br><span class="line">                current_address.className = &apos;yls_address&apos;;</span><br><span class="line">                //下一级列表添加显示样式</span><br><span class="line">                next_address.className =&apos;yls_address show&apos;;</span><br><span class="line">                //下一级列表情况</span><br><span class="line">                next_address.innerHTML = &apos;&apos;;</span><br><span class="line">                //拼接html添加到div中</span><br><span class="line">                setHtmls(next_address,data,addressNum, isInit);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        /**</span><br><span class="line">         *</span><br><span class="line">         拼接html，添加到div中，并且绑定点击事件</span><br><span class="line">         *</span><br><span class="line">         @method setHtmls</span><br><span class="line">         *</span><br><span class="line">         @param data 获取到第addressNum列的数据</span><br><span class="line">         *</span><br><span class="line">         @param faEle 需要添加html的列表div</span><br><span class="line">         *</span><br><span class="line">         @param addressNum yls_address是第几个</span><br><span class="line">         *</span><br><span class="line">         @param isInit 是点是初始化，1是初始化，0不是初始化</span><br><span class="line">         */</span><br><span class="line">        function setHtmls(faEle, data, addressNum, isInit) &#123;</span><br><span class="line">            //拼接html</span><br><span class="line">            var html = &apos;&apos;;</span><br><span class="line">            if (data) &#123;</span><br><span class="line">                for (var i = 0; i &lt; data.length; i++) &#123;</span><br><span class="line">                    if ((thisStartName[addressNum - 1] === data[i].name) &amp;&amp; isInit === 1) &#123;</span><br><span class="line">                        html += &apos;&lt;p class=&quot;p_show&quot; id=&quot;add_&apos; + data[i].areaId + &apos;&quot;  addressNum=&quot;&apos; + addressNum + &apos;&quot; areaId=&quot;&apos;+data[i].areaId+&apos;&quot;&gt;&apos; + data[i].name + &apos;&lt;/p&gt;&apos;;</span><br><span class="line">                    &#125;else&#123;</span><br><span class="line">                        html += &apos;&lt;p id=&quot;add_&apos; + data[i].areaId + &apos;&quot;  addressNum=&quot;&apos; + addressNum + &apos;&quot; areaId=&quot;&apos;+data[i].areaId+&apos;&quot;&gt;&apos; + data[i].name + &apos;&lt;/p&gt;&apos;;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                faEle.innerHTML = html;</span><br><span class="line">            &#125;</span><br><span class="line">            //绑定点击事件</span><br><span class="line">            var allP = faEle.getElementsByTagName(&apos;p&apos;);</span><br><span class="line">            for (var j = 0; j &lt; allP.length; j++) &#123;</span><br><span class="line">                allP[j].addEventListener(&apos;click&apos;, chooseAddress, false)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        /**</span><br><span class="line">         *</span><br><span class="line">         点击列表中的地址触发的方法</span><br><span class="line">         *</span><br><span class="line">         @method chooseAddress</span><br><span class="line">         *</span><br><span class="line">         */</span><br><span class="line">        function chooseAddress() &#123;</span><br><span class="line">            //获取现在点击的城市的id</span><br><span class="line">            var areaId = this.getAttribute(&apos;id&apos;).split(&apos;_&apos;)[1];</span><br><span class="line">            //获取我点击地址在第几个列表中</span><br><span class="line">            var addressNum = parseInt(this.getAttribute(&apos;addressNum&apos;));</span><br><span class="line">            //获取现在点击的城市的name</span><br><span class="line">            var name = this.innerHTML;</span><br><span class="line">            //更新数据</span><br><span class="line">            // console.log(parseInt(areaId));</span><br><span class="line">            thisStartId[addressNum-1] = parseInt(areaId);</span><br><span class="line">            thisStartName[addressNum-1] = name;</span><br><span class="line"></span><br><span class="line">            //获取当前需要渲染的地址列表</span><br><span class="line">            var current_address = document.getElementById(ylsAd + addressNum);</span><br><span class="line">            //获取当前列表选中地址的顶部tab div</span><br><span class="line">            var current_topAddress = document.getElementById(ylsTopAd + addressNum);</span><br><span class="line">            //移除当前列表中所有的标红样式，然后添加到新选择的上面</span><br><span class="line">            var pEles = current_address.getElementsByTagName(&apos;p&apos;);</span><br><span class="line">            //是否对应areaId,不等于的将样式移除</span><br><span class="line">            for(var i=0;i&lt;pEles.length;i++)&#123;</span><br><span class="line">                if(thisStartId[addressNum-1] === parseInt(pEles[i].getAttribute(&apos;areaId&apos;)))&#123;</span><br><span class="line">                    pEles[i].className = &apos;p_show&apos;;</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    pEles[i].removeAttribute(&apos;class&apos;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            //当前顶部tab换成点选的地址</span><br><span class="line">            current_topAddress.innerHTML=name;</span><br><span class="line"></span><br><span class="line">            //判断是否是最后一个列表，如果是，就不用请求新的数据，如果不是，就请求新的数据。</span><br><span class="line">            if(addressNum === 4)&#123;</span><br><span class="line">                //将文字显示到页面上</span><br><span class="line">                thisWrightHtml.innerHTML = thisStartName;</span><br><span class="line">                _this.CityArr = thisStartName;</span><br><span class="line">                _this.CityIdArr = thisStartId;</span><br><span class="line">                hideAddress();</span><br><span class="line">                setTimeout(function () &#123;</span><br><span class="line">                    thisFn();</span><br><span class="line">                &#125;,300)</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                //重新请求数据</span><br><span class="line">                getData(areaId, (addressNum+1), name, 0);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        /**</span><br><span class="line">         *</span><br><span class="line">         隐藏弹框</span><br><span class="line">         *</span><br><span class="line">         @method hideAddress</span><br><span class="line">         *</span><br><span class="line">         */</span><br><span class="line">        function hideAddress() &#123;</span><br><span class="line">            remove(document.getElementById(&quot;yls_address_choose&quot;));</span><br><span class="line">        &#125;</span><br><span class="line">        /**</span><br><span class="line">         *</span><br><span class="line">         为页面添加html</span><br><span class="line">         *</span><br><span class="line">         @method addNode</span><br><span class="line">         *</span><br><span class="line">         @param tag 标签</span><br><span class="line">         *</span><br><span class="line">         @param innerHtml 标签内html</span><br><span class="line">         *</span><br><span class="line">         @param id 标签id</span><br><span class="line">         *</span><br><span class="line">         @param className 标签样式</span><br><span class="line">         *</span><br><span class="line">         */</span><br><span class="line">        function addNode(tag, innerHtml, id, className) &#123;</span><br><span class="line">            var obj = document.createElement(tag);</span><br><span class="line">            if (id) &#123;</span><br><span class="line">                obj.id = id;</span><br><span class="line">            &#125;</span><br><span class="line">            if(className)&#123;</span><br><span class="line">                obj.className=className</span><br><span class="line">            &#125;</span><br><span class="line">            obj.innerHTML = innerHtml;</span><br><span class="line">            document.body.appendChild(obj);</span><br><span class="line">            return obj;</span><br><span class="line">        &#125;</span><br><span class="line">        /**</span><br><span class="line">         *</span><br><span class="line">         将数据渲染到当前列表的方法</span><br><span class="line">         *</span><br><span class="line">         @method remove</span><br><span class="line">         *</span><br><span class="line">         @param _element 删除的元素</span><br><span class="line">         *</span><br><span class="line">         */</span><br><span class="line">        function remove(_element) &#123;</span><br><span class="line">            var _parentElement = _element.parentNode;//找到父元素，然后删除</span><br><span class="line">            if (_parentElement) &#123;</span><br><span class="line">                _parentElement.removeChild(_element);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;以上就是所有的代码分解，其实总的来说难度比较低，在v1.0的版本下进行封装的话就更简单了，就是把一堆东西塞进一个方法里面。看着简单点，到时候写起来也简洁一点。</p>
<p>&#160;&#160;&#160;&#160;调用方法在写js之前就写了，也很简单，就是把几个数据凑一块组成对象，塞进方法里面。当前2.0版本的代码还是有很多地方可以优化。不过暂时满足我项目需要，就不做太多的改动，之后要是有更新也不会更新到文章里面了。只会直接更新到github上了。</p>
<p>&#160;&#160;&#160;&#160;还有就是目前这个弹框还有两个问题，一个是动效还没加，一个是没有去做蒙板弹出，滑动地址列表数据的时候，底层可能也会跟着一块滚动的问题，不过解决起来不难，要是真有兴趣看到这里的朋友可以自己试一试。当然，我估计应该没啥人能看到这里了。。</p>
<p>&#160;&#160;&#160;&#160;同样，有什么问题可以留言讨论，大家一起进步。</p>
<p>&#160;&#160;&#160;&#160;OVER！</p>

  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="https://github.com/Yulingsong">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#第一步-创建基本文件，确定思路"><span class="toc-number">1.</span> <span class="toc-text">第一步:创建基本文件，确定思路</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第二步-构建基本页面，编写css"><span class="toc-number">2.</span> <span class="toc-text">第二步:构建基本页面，编写css</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第三步-了解调用方法数据结构"><span class="toc-number">3.</span> <span class="toc-text">第三步:了解调用方法数据结构</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第四步-编辑逻辑部分"><span class="toc-number">4.</span> <span class="toc-text">第四步:编辑逻辑部分</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-声明对象，声明方法"><span class="toc-number">4.0.0.1.</span> <span class="toc-text">1:声明对象，声明方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-处理传递过来的数据，创建不同的变量赋值"><span class="toc-number">4.0.0.2.</span> <span class="toc-text">2:处理传递过来的数据，创建不同的变量赋值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-初始化弹框html，添加到页面上"><span class="toc-number">4.0.0.3.</span> <span class="toc-text">3:初始化弹框html，添加到页面上</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-绑定关闭弹框事件，移除相应元素"><span class="toc-number">4.0.0.4.</span> <span class="toc-text">4:绑定关闭弹框事件，移除相应元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-获取地址数据"><span class="toc-number">4.0.0.5.</span> <span class="toc-text">5:获取地址数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-设置显示html，渲染页面，绑定相应的点击事件"><span class="toc-number">4.0.0.6.</span> <span class="toc-text">6:设置显示html，渲染页面，绑定相应的点击事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-实现点击地址列表中地址的方法"><span class="toc-number">4.0.0.7.</span> <span class="toc-text">7:实现点击地址列表中地址的方法</span></a></li></ol></li></ol></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2019/01/04/web学习笔记16-移动端地址选择功能-v2-0封装/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2019/01/04/web学习笔记16-移动端地址选择功能-v2-0封装/&text=web学习笔记16-移动端地址选择功能@v2.0封装"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2019/01/04/web学习笔记16-移动端地址选择功能-v2-0封装/&title=web学习笔记16-移动端地址选择功能@v2.0封装"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2019/01/04/web学习笔记16-移动端地址选择功能-v2-0封装/&is_video=false&description=web学习笔记16-移动端地址选择功能@v2.0封装"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=web学习笔记16-移动端地址选择功能@v2.0封装&body=Check out this article: http://yoursite.com/2019/01/04/web学习笔记16-移动端地址选择功能-v2-0封装/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2019/01/04/web学习笔记16-移动端地址选择功能-v2-0封装/&title=web学习笔记16-移动端地址选择功能@v2.0封装"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2019/01/04/web学习笔记16-移动端地址选择功能-v2-0封装/&title=web学习笔记16-移动端地址选择功能@v2.0封装"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2019/01/04/web学习笔记16-移动端地址选择功能-v2-0封装/&title=web学习笔记16-移动端地址选择功能@v2.0封装"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2019/01/04/web学习笔记16-移动端地址选择功能-v2-0封装/&title=web学习笔记16-移动端地址选择功能@v2.0封装"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2019/01/04/web学习笔记16-移动端地址选择功能-v2-0封装/&name=web学习笔记16-移动端地址选择功能@v2.0封装&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2019 郁凌松
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="https://github.com/Yulingsong">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>


    <!-- Google Analytics -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-118285497-1', 'auto');
        ga('send', 'pageview');
    </script>



